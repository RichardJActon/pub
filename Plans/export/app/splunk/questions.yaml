portals:
  open:
    host:
    - $kubernetes-resource_configmap_portal_host
    ports:
    - $kubernetes-resource_configmap_portal_port
    protocols:
    - $kubernetes-resource_configmap_portal_protocol
questions:
- group: Container Image
  label: Configure Portal Button
  schema:
    attrs:
    - description: enable the portal button
      label: Enable
      schema:
        default: true
        editable: false
        hidden: true
        type: boolean
      variable: enabled
    hidden: true
    type: dict
  variable: portal
- group: Controller
  label: ''
  schema:
    additional_attrs: true
    attrs:
    - label: Show Advanced Controller Settings
      schema:
        default: false
        show_subquestions_if: true
        subquestions:
        - description: Please specify type of workload to deploy
          label: (Advanced) Controller Type
          schema:
            default: deployment
            enum:
            - description: Deployment
              value: deployment
            - description: Statefulset
              value: statefulset
            - description: Daemonset
              value: daemonset
            required: true
            type: string
          variable: type
        - description: Number of desired pod replicas
          label: Desired Replicas
          schema:
            default: 1
            required: true
            type: int
          variable: replicas
        - description: Please specify type of workload to deploy
          label: (Advanced) Update Strategy
          schema:
            default: Recreate
            enum:
            - description: 'Recreate: Kill existing pods before creating new ones'
              value: Recreate
            - description: 'RollingUpdate: Create new pods and then kill old ones'
              value: RollingUpdate
            - description: '(Legacy) OnDelete: ignore .spec.template changes'
              value: OnDelete
            required: true
            type: string
          variable: strategy
        type: boolean
      variable: advanced
    type: dict
  variable: controller
- group: Networking and Services
  label: Configure Service(s)
  schema:
    additional_attrs: true
    attrs:
    - description: The Primary service on which the healthcheck runs, often the webUI
      label: Main Service
      schema:
        additional_attrs: true
        attrs:
        - label: Main Service Port Configuration
          schema:
            additional_attrs: true
            attrs:
            - description: This port exposes the container port on the service
              label: Port
              schema:
                default: 9117
                required: true
                type: int
              variable: port
            - label: Show Advanced settings
              schema:
                default: false
                show_subquestions_if: true
                subquestions:
                - label: Enable the port
                  schema:
                    default: true
                    type: boolean
                  variable: enabled
                - label: Port Type
                  schema:
                    default: HTTP
                    enum:
                    - description: HTTP
                      value: HTTP
                    - description: HTTPS
                      value: HTTPS
                    - description: TCP
                      value: TCP
                    - description: UDP
                      value: UDP
                    type: string
                  variable: protocol
                - description: This port gets exposed to the node. Only considered
                    when service type is NodePort, Simple or LoadBalancer
                  label: Node Port (Optional)
                  schema:
                    max: 65535
                    min: 9000
                    type: int
                  variable: nodePort
                - description: The internal(!) port on the container the Application
                    runs on
                  label: Target Port
                  schema:
                    default: 9117
                    type: int
                  variable: targetPort
                type: boolean
              variable: advanced
            type: dict
          variable: main
        type: dict
      variable: main
    type: dict
  variable: service
- group: Networking and Services
  label: Show Expert Config
  schema:
    default: false
    show_subquestions_if: true
    subquestions:
    - group: Networking and Services
      label: Host-Networking (Complicated)
      schema:
        default: false
        type: boolean
      variable: hostNetwork
    type: boolean
  variable: serviceexpert
- description: Integrated Persistent Storage
  group: Storage and Persistence
  label: Integrated Persistent Storage
  schema:
    additional_attrs: true
    attrs:
    - description: Stores the Application Configuration.
      label: App Config Storage
      schema:
        additional_attrs: true
        attrs:
        - description: Sets the persistence type, Anything other than PVC could break
            rollback!
          label: Type of Storage
          schema:
            default: simplePVC
            enum:
            - description: PVC (simple)
              value: simplePVC
            - description: HostPath (simple)
              value: simpleHP
            - description: emptyDir
              value: emptyDir
            - description: pvc
              value: pvc
            - description: hostPath
              value: hostPath
            type: string
          variable: type
        - description: Path inside the container the storage is mounted
          label: hostPath
          schema:
            show_if:
            - - type
              - '='
              - hostPath
            type: hostpath
          variable: hostPath
        - label: EmptyDir Medium
          schema:
            default: ''
            enum:
            - description: Default
              value: ''
            - description: Memory
              value: Memory
            show_if:
            - - type
              - '='
              - emptyDir
            type: string
          variable: medium
        type: dict
      variable: config
    type: dict
  variable: persistence
- group: Ingress
  label: ''
  schema:
    additional_attrs: true
    attrs:
    - label: Main Ingress
      schema:
        additional_attrs: true
        attrs: null
        type: dict
      variable: main
    type: dict
  variable: ingress
- group: Security and Permissions
  label: Show Advanced Security Settings
  schema:
    default: false
    show_subquestions_if: true
    subquestions:
    - label: Security Context
      schema:
        additional_attrs: true
        attrs:
        - label: Privileged mode
          schema:
            default: false
            type: boolean
          variable: privileged
        - label: ReadOnly Root Filesystem
          schema:
            default: false
            type: boolean
          variable: readOnlyRootFilesystem
        - label: Allow Privilege Escalation
          schema:
            default: false
            type: boolean
          variable: allowPrivilegeEscalation
        - label: runAsNonRoot
          schema:
            default: true
            type: boolean
          variable: runAsNonRoot
        type: dict
      variable: securityContext
    type: boolean
  variable: advancedSecurity
- group: Security and Permissions
  label: Pod Security Context
  schema:
    additional_attrs: true
    attrs:
    - description: The UserID of the user running the application
      label: runAsUser
      schema:
        default: 568
        type: int
      variable: runAsUser
    - description: The groupID this App of the user running the application"
      label: runAsGroup
      schema:
        default: 568
        type: int
      variable: runAsGroup
    - description: The group that should own ALL storage.
      label: fsGroup
      schema:
        default: 568
        type: int
      variable: fsGroup
    type: dict
  variable: podSecurityContext
